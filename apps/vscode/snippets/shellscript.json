{
  "Strict Mode": {
    "prefix": "strict",
    "body": "set -euo pipefail",
    "description": "Bash strict mode - exit on error, undefined vars, pipe failures"
  },
  "Shebang Bash": {
    "prefix": "shebang",
    "body": "#!/usr/bin/env bash",
    "description": "Portable bash shebang"
  },
  "Script Header": {
    "prefix": "header",
    "body": ["#!/usr/bin/env bash", "set -euo pipefail", "", "# ${TM_FILENAME}", "# ${1:Description}", "", "$0"],
    "description": "Full script header with strict mode"
  },
  "Function": {
    "prefix": "fn",
    "body": ["${1:function_name}() {", "\t$0", "}"],
    "description": "Bash function"
  },
  "Function with Local Vars": {
    "prefix": "fnl",
    "body": ["${1:function_name}() {", "\tlocal ${2:var}=\"${3:value}\"", "\t$0", "}"],
    "description": "Bash function with local variables"
  },
  "If Statement": {
    "prefix": "if",
    "body": ["if [[ ${1:condition} ]]; then", "\t$0", "fi"],
    "description": "If statement with [[ ]]"
  },
  "If Else": {
    "prefix": "ife",
    "body": ["if [[ ${1:condition} ]]; then", "\t$2", "else", "\t$0", "fi"],
    "description": "If-else statement"
  },
  "If File Exists": {
    "prefix": "iff",
    "body": ["if [[ -f \"${1:file}\" ]]; then", "\t$0", "fi"],
    "description": "Check if file exists"
  },
  "If Directory Exists": {
    "prefix": "ifd",
    "body": ["if [[ -d \"${1:directory}\" ]]; then", "\t$0", "fi"],
    "description": "Check if directory exists"
  },
  "If Command Exists": {
    "prefix": "ifc",
    "body": ["if command -v ${1:command} &>/dev/null; then", "\t$0", "fi"],
    "description": "Check if command exists"
  },
  "For Loop": {
    "prefix": "for",
    "body": ["for ${1:item} in ${2:items}; do", "\t$0", "done"],
    "description": "For loop"
  },
  "For Loop Files": {
    "prefix": "forf",
    "body": ["for ${1:file} in ${2:*.txt}; do", "\t[[ -f \"$${1}\" ]] || continue", "\t$0", "done"],
    "description": "For loop over files with existence check"
  },
  "While Read": {
    "prefix": "while",
    "body": ["while IFS= read -r ${1:line}; do", "\t$0", "done < \"${2:file}\""],
    "description": "While read loop"
  },
  "Case Statement": {
    "prefix": "case",
    "body": ["case \"${1:\\$1}\" in", "\t${2:pattern})", "\t\t$0", "\t\t;;", "\t*)", "\t\techo \"Unknown: \\$1\" >&2", "\t\texit 1", "\t\t;;", "esac"],
    "description": "Case statement"
  },
  "Debug Echo": {
    "prefix": "dbg",
    "body": "echo \"DEBUG: ${1:message}\" >&2",
    "description": "Debug message to stderr"
  },
  "Error and Exit": {
    "prefix": "die",
    "body": "echo \"Error: ${1:message}\" >&2 && exit 1",
    "description": "Print error and exit"
  },
  "Die Function": {
    "prefix": "diefn",
    "body": ["die() { echo \"Error: \\$*\" >&2; exit 1; }"],
    "description": "Die helper function"
  },
  "Script Directory": {
    "prefix": "scriptdir",
    "body": "SCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"",
    "description": "Get directory containing the script"
  },
  "Trap Cleanup": {
    "prefix": "trap",
    "body": ["cleanup() {", "\t${1:# cleanup code}", "}", "trap cleanup EXIT"],
    "description": "Trap for cleanup on exit"
  },
  "Parse Arguments": {
    "prefix": "args",
    "body": ["while [[ \\$# -gt 0 ]]; do", "\tcase \"\\$1\" in", "\t\t-h|--help)", "\t\t\techo \"Usage: \\$0 [options]\"", "\t\t\texit 0", "\t\t\t;;", "\t\t-${2:v}|--${3:verbose})", "\t\t\t${4:VERBOSE}=1", "\t\t\tshift", "\t\t\t;;", "\t\t*)", "\t\t\techo \"Unknown option: \\$1\" >&2", "\t\t\texit 1", "\t\t\t;;", "\tesac", "done"],
    "description": "Argument parsing boilerplate"
  },
  "Require Command": {
    "prefix": "require",
    "body": "command -v ${1:cmd} &>/dev/null || die \"${1:cmd} is required\"",
    "description": "Require a command exists"
  },
  "Heredoc": {
    "prefix": "heredoc",
    "body": ["cat <<'EOF'", "$0", "EOF"],
    "description": "Heredoc (no variable expansion)"
  },
  "Heredoc with Variables": {
    "prefix": "heredocv",
    "body": ["cat <<EOF", "$0", "EOF"],
    "description": "Heredoc with variable expansion"
  },
  "Temporary File": {
    "prefix": "tmpfile",
    "body": ["${1:TMPFILE}=$(mktemp)", "trap \"rm -f \\$${1:TMPFILE}\" EXIT", "$0"],
    "description": "Create temp file with cleanup"
  },
  "Temporary Directory": {
    "prefix": "tmpdir",
    "body": ["${1:TMPDIR}=$(mktemp -d)", "trap \"rm -rf \\$${1:TMPDIR}\" EXIT", "$0"],
    "description": "Create temp directory with cleanup"
  },
  "Confirm Prompt": {
    "prefix": "confirm",
    "body": ["read -rp \"${1:Are you sure?} [y/N] \" response", "[[ \"\\$response\" =~ ^[Yy] ]] || exit 0"],
    "description": "Confirmation prompt"
  },
  "Source Relative": {
    "prefix": "source",
    "body": "source \"$(dirname \"${BASH_SOURCE[0]}\")/${1:file.sh}\"",
    "description": "Source file relative to script"
  }
}
